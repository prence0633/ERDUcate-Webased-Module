<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ERDucate - Login</title>
<link rel="icon" href="ERDucate.ico">
<style>
 * { box-sizing: border-box; }
html, body {
  height: 100%; margin: 0;
  font-family: "Poppins", Arial, sans-serif;
  background: #f9f9f9;
  display: flex; justify-content: center; align-items: center;
  padding: 20px; position: relative;
}
body::before {
  content: "";
  position: absolute; inset: 0;
  background: url("tup-logo.png") no-repeat center;
  background-size: 250px;
  opacity: 0.04;
  z-index: 0;
}

/* ===== LOGIN BOX ===== */
.login-box {
  background: #fff; padding: 45px 35px;
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.12);
  text-align: center;
  width: 100%; max-width: 380px;
  animation: fadeIn 0.8s ease-in-out;
  z-index: 1; position: relative;
}
.login-box img { width: 80px; margin-bottom: 10px; }
.login-box h1 { margin: 5px 0; font-size: 24px; font-weight: 700; color: #800000; }
.login-box p { margin: 0 0 25px; font-size: 14px; color: #444; }

.input-group {
  position: relative;
  margin: 8px 0;
}
.input-group input {
  width: 100%; padding: 12px 40px 12px 12px;
  border: 1px solid #ccc; border-radius: 8px;
  font-size: 14px;
  transition: border 0.3s ease, box-shadow 0.3s ease;
}
.input-group input:focus {
  border: 1px solid #800000;
  outline: none; box-shadow: 0 0 6px rgba(128,0,0,0.3);
}
.show-pass-check {
  position: absolute; right: 10px; top: 50%;
  transform: translateY(-50%);
  display: flex; align-items: center; gap: 4px;
  font-size: 12px; color: #444;
}

.login-box button {
  width: 100%; padding: 12px;
  background: #800000; color: #fff;
  border: none; border-radius: 8px;
  font-size: 15px; font-weight: 600;
  cursor: pointer; margin-top: 14px;
  transition: background 0.3s ease, transform 0.2s ease;
}
.login-box button:hover { background: #a00000; transform: translateY(-2px); }
.alt-btn { background: #555; margin-top: 8px; }
.alt-btn:hover { background: #333; }
.error-message {
  color: #c00000; margin-bottom: 12px;
  font-weight: 500; font-size: 13px;
}
@keyframes fadeIn { from {opacity: 0; transform: translateY(-15px);} to {opacity: 1; transform: translateY(0);} }

/* ===== SIGNUP MODAL ===== */
.modal { 
  display: none; position: fixed; z-index: 10; left: 0; top: 0;
  width: 100%; height: 100%; background: rgba(0,0,0,0.4);
  justify-content: center; align-items: center;
  animation: fadeBg 0.3s ease;
}
@keyframes fadeBg { from {background: rgba(0,0,0,0);} to {background: rgba(0,0,0,0.4);} }
.modal-content {
  background: #fff; 
  backdrop-filter: blur(12px);
  padding: 35px 30px; border-radius: 20px;
  width: 100%; max-width: 400px; text-align: center;
  box-shadow: 0 10px 35px rgba(0,0,0,0.15);
  transform: scale(0.85); animation: popIn 0.3s ease forwards;
  position: relative;
}
@keyframes popIn { to {transform: scale(1);} }
.modal-content h2 { margin: 0 0 15px; font-size: 22px; color: #800000; }
.close {
  position: absolute; top: 12px; right: 18px;
  font-size: 22px; font-weight: bold; color: #800000;
  cursor: pointer; transition: 0.3s;
}
.close:hover { color: #a00000; transform: scale(1.2); }

/* Signup Button Style inside modal */
.signup-btn {
  width: 100%; padding: 12px;
  background: #00804b; color: #fff;
  border: none; border-radius: 8px;
  font-size: 15px; font-weight: 600;
  cursor: pointer; margin-top: 14px;
  transition: background 0.3s ease, transform 0.2s ease;
}

/* ===== RESPONSIVENESS ===== */
@media (max-width: 1024px) {
  html, body { padding: 15px; }
  .login-box { max-width: 360px; padding: 40px 30px; }
  .modal-content { max-width: 380px; padding: 30px 25px; }
}

@media (max-width: 768px) {
  html, body { padding: 10px; }
  .login-box { max-width: 340px; padding: 35px 25px; }
  .login-box h1 { font-size: 22px; }
  .modal-content { max-width: 340px; padding: 25px 20px; }
}

@media (max-width: 480px) {
  html, body { padding: 8px; }
  .login-box { max-width: 300px; padding: 30px 20px; }
  .login-box img { width: 70px; }
  .login-box h1 { font-size: 20px; }
  .login-box p { font-size: 13px; }
  .input-group input { font-size: 13px; padding: 10px 38px 10px 10px; }
  .login-box button, .signup-btn { font-size: 14px; padding: 10px; }
  .modal-content { max-width: 300px; padding: 20px 18px; }
  .modal-content h2 { font-size: 20px; }
}

  .signup-btn:hover { background: #00a060; transform: translateY(-2px); }
</style>
</head>
<body>
  <div class="login-box">
    <img src="tup-logo.jpg" alt="TUP Logo" />
    <h1>ERDucate Login</h1>
    <p>Technological University of the Philippines</p>

    <form onsubmit="return login(event)">
      <div id="error" class="error-message"></div>
      <div class="input-group">
        <input type="text" id="username" placeholder="Enter your username" autofocus />
      </div>
      <div class="input-group">
        <input type="password" id="password" placeholder="Enter your password" />
        <span class="show-pass-check">
          <input type="checkbox" id="showLoginPass" onclick="togglePassword('password')">
          <label for="showLoginPass">üëÅ show password</label>
        </span>
      </div>
      <button type="submit">üîí Login</button>
      <button type="button" class="alt-btn" onclick="openSignup()">üë§ Sign Up</button>
    </form>
  </div>

  <!-- === Sign Up Modal === -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSignup()">&times;</span>
      <h2>üë§ Create Account</h2>
      <div id="signupError" class="error-message"></div>
      <div class="input-group">
        <input type="text" id="newUsername" placeholder="Choose username" />
      </div>
      <div class="input-group">
        <input type="text" id="newCourse" placeholder="Enter course" />
      </div>
      <div class="input-group">
        <input type="password" id="newPassword" placeholder="Enter password" />
        <span class="show-pass-check">
          <input type="checkbox" id="showSignupPass" onclick="togglePassword('newPassword')">
          <label for="showSignupPass">üëÅ show password</label>
        </span>
      </div>
      <div class="input-group">
        <input type="password" id="confirmPassword" placeholder="Confirm password" />
        <span class="show-pass-check">
          <input type="checkbox" id="showConfirmPass" onclick="togglePassword('confirmPassword')">
          <label for="showConfirmPass">üëÅ show password</label>
        </span>
      </div>
      <button class="signup-btn" onclick="signup()">üë§ Sign Up</button>
    </div>
  </div>

<script>
function login(event){
  event.preventDefault();
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();
  const errorDiv = document.getElementById('error');

  if(!username){
    errorDiv.textContent = "‚ö†Ô∏è Please enter your username.";
    return false;
  }
  if(!password){
    errorDiv.textContent = "‚ö†Ô∏è Please enter your password.";
    return false;
  }

  let users = JSON.parse(localStorage.getItem("users")) || {};
  if(!users[username]){
    errorDiv.textContent = "‚ö†Ô∏è Username not found. Please sign up.";
    return false;
  }
  if(users[username].password !== password){
    errorDiv.textContent = "‚ö†Ô∏è Incorrect password.";
    return false;
  }

  localStorage.setItem("loggedInUser", username);
  window.location.href = "./index.html";
  return true;
}

function openSignup(){ document.getElementById("signupModal").style.display = "flex"; }
function closeSignup(){ document.getElementById("signupModal").style.display = "none"; }

function signup(){
  const username = document.getElementById('newUsername').value.trim();
  const course = document.getElementById('newCourse').value.trim();
  const password = document.getElementById('newPassword').value.trim();
  const confirmPassword = document.getElementById('confirmPassword').value.trim();
  const errorDiv = document.getElementById('signupError');

  if(!username || !course || !password || !confirmPassword){
    errorDiv.textContent = "‚ö†Ô∏è All fields are required.";
    return;
  }
  if(password !== confirmPassword){
    errorDiv.textContent = "‚ö†Ô∏è Passwords do not match.";
    return;
  }

  let users = JSON.parse(localStorage.getItem("users")) || {};
  if(users[username]){
    errorDiv.textContent = "‚ö†Ô∏è Username already exists.";
    return;
  }

  users[username] = {
    course: course,
    password: password,
    progress: {
      lessons: [false,false,false,false],
      quizzes: [false,false,false,false],
      games: [false,false,false,false],
      achievements: [false,false,false,false]
    }
  };

  localStorage.setItem("users", JSON.stringify(users));
  alert("‚úÖ Account created! You can now log in.");
  closeSignup();
}

// ‚úÖ Toggle password visibility
function togglePassword(id){
  const input = document.getElementById(id);
  input.type = input.type === "password" ? "text" : "password";
}
</script>
</body>
</html>
