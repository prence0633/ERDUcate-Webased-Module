<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ERDucate Quiz 8 - SQL Output Prediction</title>
<link rel="icon" href="ERDucate.ico">
<style>
  body {
  font-family: 'Poppins', sans-serif;
  max-width: 900px;
  margin: 0 auto;
  padding: 0 20px;
  background-image: url("Quiz-Background-Lesson8.png");
  background-repeat: no-repeat;
  background-position: center center;
  background-attachment: fixed;
  background-size: cover;
  color: #333;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  position: relative;
}
header {
  background-color: #800000;
  color: #fff;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
header .title { font-size: 20px; font-weight: 600; }
header .btn-group a {
  background: transparent;
  border: 2px solid #fff;
  color: #fff;
  padding: 6px 14px;
  border-radius: 6px;
  cursor: pointer;
  text-decoration: none;
  font-size: 14px;
  transition: 0.3s ease;
}
header .btn-group a:hover { background: #fff; color: #800000; }
h1 {
  color: #800000;
  text-align: center;
  margin-top: 25px;
}
form { margin-top: 20px; }
.question {
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.question h3 { margin: 0 0 10px; color: #800000; }
.question pre {
  background:#f4f4f4;
  padding:8px;
  border-radius:6px;
  font-size:14px;
  overflow-x:auto;
}
.question label { display: block; margin: 6px 0; }
button.submit-btn {
  padding: 12px 20px;
  background: #800000;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  display: block;
  margin: 15px auto 15px auto;
  transition: 0.3s ease;
}
footer {
  text-align: center;
  background: #800000;
  color: #fff;
  padding: 25px;
  font-size: 13px;
}
.timer {
  font-weight: bold;
  font-size: 16px;
  text-align: center;
  margin-top: 10px;
}
#resultModal {
  position: fixed;
  top:0; left:0;
  width:100vw; height:100vh;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
  z-index: 9999;
}
.modal-content {
  background: #fff;
  border-radius: 12px;
  max-width: 600px;
  width: 100%;
  padding: 20px 25px;
  text-align: left;
  position: relative;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}
.modal-content h2 { color: #800000; margin-top:0; }
.modal-content ul { padding-left:20px; margin:15px 0; }
.modal-content button {
  margin-top: 15px;
  padding: 10px 18px;
  border:none;
  border-radius:8px;
  font-weight:600;
  background:#800000;
  color:#fff;
  cursor:pointer;
  position: relative;
}
.modal-content button:hover { background:#a00000; }
.close-btn {
  position: absolute;
  top:10px; right:15px;
  background:transparent;
  border:none;
  font-size:22px;
  cursor:pointer;
  color:#666;
}
.close-btn:hover { color:#000; }
#proceedBtn { opacity:0.5; pointer-events:none; }
#proceedBtn.enabled { opacity:1; pointer-events:auto; }

/* -------------------- RESPONSIVE DESIGN -------------------- */

/* For laptops / smaller desktops */
@media (max-width: 1024px) {
  body { padding: 0 15px; }
  header { flex-wrap: wrap; gap: 10px; }
  header .title { font-size: 18px; }
  h1 { font-size: 26px; }
  .question { padding: 12px; }
  .modal-content { max-width: 90%; }
}

/* For tablets */
@media (max-width: 768px) {
  header { flex-direction: column; text-align: center; }
  header .btn-group { margin-top: 8px; }
  header .title { font-size: 18px; }

  h1 { font-size: 22px; margin-top: 20px; }
  .question { padding: 12px; font-size: 15px; }
  .question pre { font-size: 13px; }
  button.submit-btn { width: 80%; }
  .modal-content { padding: 15px 18px; }
  footer { font-size: 12px; padding: 20px; }
}

/* For mobile phones */
@media (max-width: 480px) {
  body { padding: 0 10px; }
  header { flex-direction: column; gap: 8px; text-align: center; }
  header .btn-group a { font-size: 13px; padding: 5px 10px; }

  h1 { font-size: 20px; }
  .question { padding: 10px; font-size: 14px; }
  .question pre { font-size: 12px; }
  button.submit-btn {
    width: 95%;
    font-size: 14px;
    padding: 10px 14px;
  }
  .modal-content { padding: 12px 15px; font-size: 14px; }
  .modal-content h2 { font-size: 18px; }
  .modal-content button { width: 100%; font-size: 14px; }
  footer { font-size: 11px; padding: 15px; }
}

</style>
</head>
<body>

<header>
  <div class="title">Quiz 8 - SQL Output Prediction</div>
  <div class="btn-group">
    <a href="Lesson8.html">üìö Back to Lesson</a>
    <a href="index.html">üè† Home</a>
  </div>
</header>

<h1>Quiz - Introduction to SQL</h1>
<div class="timer">Time left: <span id="time">150</span>s</div>

<form id="quizForm"></form>

<button id="submitQuiz" class="submit-btn">Submit</button>

<script>
const form = document.getElementById("quizForm");
const submitBtn = document.getElementById("submitQuiz");

// Questions: SQL + choose correct output
const questions = [
  {
    text:`We have table STUDENTS:\nID | Name | Age\n1 | John | 20\n2 | Mia | 21\n3 | Carlo | 22\n\nQuery:\nSELECT Name FROM STUDENTS WHERE Age > 20;`,
    options:["John","Mia, Carlo","Carlo","All three"]
  },
  {
    text:`Table: ORDERS\nOrderID | Customer | Amount\n1 | John | 200\n2 | Mia | 150\n3 | John | 300\n\nQuery:\nSELECT Customer, SUM(Amount) FROM ORDERS GROUP BY Customer;`,
    options:[
      "John=200, Mia=150, John=300",
      "John=500, Mia=150",
      "200+150+300=650",
      "Each row unchanged"
    ]
  },
  {
    text:`Table: PRODUCTS\nID | Item | Price\n1 | Pen | 10\n2 | Book | 50\n3 | Bag | 200\n\nQuery:\nSELECT Item FROM PRODUCTS WHERE Price BETWEEN 10 AND 100;`,
    options:["Pen","Book","Pen, Book","Book, Bag"]
  },
  {
    text:`Table: EMPLOYEES\nID | Name | Dept\n1 | Alice | HR\n2 | Bob | IT\n3 | Carla | HR\n\nQuery:\nSELECT DISTINCT Dept FROM EMPLOYEES;`,
    options:["HR, IT","HR, IT, HR","Alice, Bob, Carla","All employees"]
  },
  {
    text:`Table: SALES\nID | Product | Qty\n1 | Pen | 5\n2 | Book | 3\n3 | Pen | 2\n\nQuery:\nSELECT Product, SUM(Qty) FROM SALES GROUP BY Product;`,
    options:["Pen=5, Book=3, Pen=2","Pen=7, Book=3","Total=10","Pen=5, Book=5"]
  }
];

const answers = {
  q1:"Mia, Carlo",
  q2:"John=500, Mia=150",
  q3:"Pen, Book",
  q4:"HR, IT",
  q5:"Pen=7, Book=3"
};

const rationalizations = {
  q1:"‚úÖ Correct: Only Mia (21) and Carlo (22) are >20.",
  q2:"‚úÖ Correct: GROUP BY sums John's two rows ‚Üí John=500, Mia=150.",
  q3:"‚úÖ Correct: Price between 10 and 100 includes Pen (10) and Book (50).",
  q4:"‚úÖ Correct: DISTINCT removes duplicates ‚Üí HR, IT.",
  q5:"‚úÖ Correct: Pen total 5+2=7, Book=3."
};

// Generate questions dynamically
questions.forEach((q,i)=>{
  const div=document.createElement("div");
  div.className="question";
  const qNum=i+1;
  let optionsHTML="";
  q.options.forEach(opt=>{
    optionsHTML+=`<label><input type="radio" name="q${qNum}" value="${opt}"> ${opt}</label>`;
  });
  div.innerHTML=`<h3>${qNum}. Predict the output:</h3>
  <pre>${q.text}</pre>
  ${optionsHTML}`;
  form.appendChild(div);
});

// Modal
const modal=document.createElement("div");
modal.id="resultModal";
modal.innerHTML=`<div class="modal-content">
  <button class="close-btn">&times;</button>
  <h2>Quiz Results & Rationalization</h2>
  <p id="scoreText"></p>
  <ul id="rationalizationList"></ul>
  <button id="proceedBtn">Proceed to Game 8</button>
</div>`;
document.body.appendChild(modal);

const timerEl=document.getElementById("time");
let timeLeft=150;
timerEl.textContent=timeLeft;
const timer=setInterval(()=>{
  timeLeft--; timerEl.textContent=timeLeft;
  if(timeLeft<=0){ clearInterval(timer); submitBtn.click(); }
},1000);

const closeBtn=modal.querySelector(".close-btn");
const scoreText=modal.querySelector("#scoreText");
const rationalizationList=modal.querySelector("#rationalizationList");
const proceedBtn=modal.querySelector("#proceedBtn");

let users=JSON.parse(localStorage.getItem("users"))||{};
let currentUser=localStorage.getItem("loggedInUser")||"DemoUser";
if(!users[currentUser]) users[currentUser]={progress:{}};

proceedBtn.addEventListener("mouseenter",()=>{
  if(!users[currentUser].progress.quiz8){
    const x=Math.random()*150; const y=Math.random()*50;
    proceedBtn.style.transform=`translate(${x}px,${y}px)`;
  }
});
proceedBtn.addEventListener("mouseleave",()=>{ proceedBtn.style.transform=`translate(0,0)` });

submitBtn.addEventListener("click",()=>{
  clearInterval(timer);
  let score=0;
  rationalizationList.innerHTML="";
  for(let i=1;i<=questions.length;i++){
    let selected=(form["q"+i]&&form["q"+i].value)||"";
    const li=document.createElement("li");
    if(selected===answers["q"+i]){
      score++; li.textContent=rationalizations["q"+i];
    } else {
      li.textContent="‚ùå Incorrect. "+rationalizations["q"+i].slice(2);
    }
    rationalizationList.appendChild(li);
  }
  scoreText.textContent=`You scored ${score} out of ${questions.length}.`;
  if(score>=3){
    users[currentUser].progress.quiz8=true;
    localStorage.setItem("users",JSON.stringify(users));
    proceedBtn.classList.add("enabled");
    proceedBtn.textContent="üéÆ Proceed to Game";
  } else {
    proceedBtn.classList.remove("enabled");
    proceedBtn.textContent="Score too low. Try again!";
  }
  modal.style.display="flex";
});

closeBtn.addEventListener("click",()=>{ modal.style.display="none"; });
proceedBtn.addEventListener("click",()=>{ if(users[currentUser].progress.quiz8) location.href="game8.html"; });
</script>

<footer>
  ERDucate Developer ¬© 2025 | Technological University of the Philippines
</footer>

</body>
</html>
